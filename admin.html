<!DOCTYPE html>
<html>
<head>
  <title>Bus CMS</title>
</head>
<body>
  <h1>Manage Bus Timings</h1>

  <form id="busForm">
    Route: <input type="text" id="route"><br>
    Departure: <input type="text" id="departure"><br>
    Arrival: <input type="text" id="arrival"><br>
    <button type="submit">Add Bus</button>
  </form>

  <ul id="busList"></ul>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-database.js"></script>

  <script>
    // Paste your config here
    const firebaseConfig = {
      apiKey: "AIzaSyCyd5z7FH1MMI2EzosEc3H85Z4IwheVkqE",
    authDomain: "bus-on-time1.firebaseapp.com",
    databaseURL: "https://bus-on-time1-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "bus-on-time1",
    storageBucket: "bus-on-time1.firebasestorage.app",
    messagingSenderId: "453706146764",
    appId: "1:453706146764:web:94352472051dc6fb61f369"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const form = document.getElementById('busForm');
    const busList = document.getElementById('busList');

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const route = document.getElementById('route').value;
      const departure = document.getElementById('departure').value;
      const arrival = document.getElementById('arrival').value;

      db.ref('buses/' + route).set({ route, departure, arrival });
      form.reset();
    });

    db.ref('buses').on('value', snapshot => {
      busList.innerHTML = '';
      snapshot.forEach(child => {
        const bus = child.val();
        const li = document.createElement('li');
        li.textContent = `${bus.route}: ${bus.departure} â†’ ${bus.arrival}`;
        busList.appendChild(li);
      });
    });
  </script>
</body>
</html>
